ãƒ•ãƒ­ãƒ³ãƒˆå´ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ï¼š

vscodeã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰â†’ã‚¨ãƒ©ãƒ¼ãªã—ã€è­¦å‘Šï¼ˆæ„å›³çš„ãªæŠ‘åˆ¶ï¼‘ä»¶ã‚’é™¤ãï¼‰ãªã—ã€ãƒ•ãƒ­ãƒ³ãƒˆå´ã‚‚åŒæ§˜ã«ã‚¨ãƒ©ãƒ¼ãƒ»è­¦å‘Šãªã—ã€‚ã“ã“ã¾ã§ããŸã‚‰ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã ã—ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãæ„Ÿã˜ï¼Ÿ ã¾ã ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯å‡ºã•ãªãã¦ã„ã„ã‘ã©ã€ã¾ãšãƒ•ãƒ­ãƒ³ãƒˆå´ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã©ã“ã¾ã§ã‚„ã‚‹ã‹æ•™ãˆã¦(ï¼¾Ï‰ï¼¾)

ğŸ§ª ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ï¼ˆå°ã€œä¸­è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‘ã‘ï¼‰
ğŸ¯ ãƒ†ã‚¹ãƒˆã®å„ªå…ˆé †ä½ï¼ˆç¾å®Ÿçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼‰
ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦æ¨¡åˆ¥ã®ãƒ†ã‚¹ãƒˆæ¨å¥¨åº¦
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦æ¨¡	æ¨å¥¨ãƒ†ã‚¹ãƒˆ	ç†ç”±
å°è¦æ¨¡	E2Eã®ã¿	ã‚³ã‚¹ãƒ‘æœ€é«˜ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦–ç‚¹ã§ã®ãƒ†ã‚¹ãƒˆ
ä¸­è¦æ¨¡	E2E + é‡è¦ãªå˜ä½“	ãƒãƒ©ãƒ³ã‚¹å‹
å¤§è¦æ¨¡	å…¨å±¤ï¼ˆå˜ä½“+çµ±åˆ+E2Eï¼‰	å“è³ªä¿è¨¼å¿…é ˆ
ğŸ“‹ ã‚ãªãŸã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æ¨å¥¨ã™ã‚‹ãƒ†ã‚¹ãƒˆæˆ¦ç•¥
âœ… æ¨å¥¨: E2Eãƒ†ã‚¹ãƒˆä¸­å¿ƒ + Î±
ç†ç”±:

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ â†’ ä½¿ã†äººãŒæ©Ÿèƒ½ã‚’ç¢ºèªã§ãã‚‹
å°ã€œä¸­è¦æ¨¡ â†’ éå‰°ãªãƒ†ã‚¹ãƒˆã¯ä¿å®ˆã‚³ã‚¹ãƒˆãŒé«˜ã„
SPA â†’ E2Eã§ã»ã¼ã‚«ãƒãƒ¼å¯èƒ½
ğŸ¯ å…·ä½“çš„ã«ã©ã“ã¾ã§ã‚„ã‚‹ã‹ï¼Ÿ
1ï¸âƒ£ å¿…é ˆ: E2E ãƒ†ã‚¹ãƒˆï¼ˆPlaywright æ¨å¥¨ï¼‰
ãƒ†ã‚¹ãƒˆã™ã¹ãæ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦é †ï¼‰
ğŸ”´ æœ€å„ªå…ˆï¼ˆçµ¶å¯¾ã‚„ã‚‹ï¼‰
âœ… ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§è¡¨ç¤º
âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ç·¨é›†
âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤
âœ… èªè¨¼ã‚¬ãƒ¼ãƒ‰ï¼ˆæœªãƒ­ã‚°ã‚¤ãƒ³ã§ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦ï¼‰
âœ… ç®¡ç†è€…æ¨©é™ã‚¬ãƒ¼ãƒ‰ï¼ˆä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç®¡ç†ç”»é¢ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯ï¼‰
```

##### ğŸŸ¡ **æ¨å¥¨ï¼ˆä½™è£•ãŒã‚ã‚Œã°ã‚„ã‚‹ï¼‰**
```
âœ… æ¤œç´¢æ©Ÿèƒ½
âœ… ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
âœ… ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½
âœ… ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
âœ… å¤šè¨€èªåˆ‡ã‚Šæ›¿ãˆ
âœ… ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼ˆç”»é¢ã‚µã‚¤ã‚ºå¤‰æ›´ï¼‰
```

##### ğŸŸ¢ **ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆæ™‚é–“ãŒã‚ã‚Œã°ï¼‰**
```
âœ… ã‚¨ãƒ©ãƒ¼é€šçŸ¥è¡¨ç¤º
âœ… ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
âœ… ã‚»ãƒƒã‚·ãƒ§ãƒ³æœŸé™åˆ‡ã‚Œ
```

---

### 2ï¸âƒ£ **æ¨å¥¨: å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆè»½ãï¼‰**

#### ãƒ†ã‚¹ãƒˆã™ã¹ããƒ•ã‚¡ã‚¤ãƒ«

##### ğŸ”´ **æœ€å„ªå…ˆï¼ˆãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼‰**
```
âœ… utils/validation.js
   â†’ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆ
   
âœ… composables/useValidation.js
   â†’ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã®ãƒ†ã‚¹ãƒˆ
```

##### ğŸŸ¡ **æ¨å¥¨ï¼ˆé‡è¦ãªãƒ­ã‚¸ãƒƒã‚¯ï¼‰**
```
âœ… composables/useApiError.js
   â†’ ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç”Ÿæˆãƒ†ã‚¹ãƒˆ
   
âœ… stores/auth.js
   â†’ ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®ç®¡ç†ãƒ†ã‚¹ãƒˆï¼ˆè»½ãï¼‰
```

##### ğŸŸ¢ **ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆæ™‚é–“ãŒã‚ã‚Œã°ï¼‰**
```
âœ… stores/notification.js
âœ… stores/locale.js
```

---

### 3ï¸âƒ£ **ã‚¹ã‚­ãƒƒãƒ—æ¨å¥¨: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ**

#### ãªãœã‚¹ã‚­ãƒƒãƒ—ï¼Ÿ
```
âŒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½“ãƒ†ã‚¹ãƒˆã¯ä¿å®ˆã‚³ã‚¹ãƒˆãŒé«˜ã„
   â†’ UIå¤‰æ›´ã®ãŸã³ã«ãƒ†ã‚¹ãƒˆã‚‚ä¿®æ­£
   
âŒ E2Eã§ã‚«ãƒãƒ¼ã§ãã‚‹
   â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦–ç‚¹ã§å‹•ä½œç¢ºèªã§ãã‚‹
   
âŒ Vuetifyä¾å­˜ãŒå¼·ã„
   â†’ Vuetifyã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¢ãƒƒã‚¯åŒ–ãŒé¢å€’
```

#### ä¾‹å¤–: ãƒ†ã‚¹ãƒˆã—ã¦ã‚‚è‰¯ã„å ´åˆ
```
âœ… è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’æŒã¤ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
   â†’ ä¾‹: è¤‡é›‘ãªè¨ˆç®—å‡¦ç†ã€è¤‡é›‘ãªæ¡ä»¶åˆ†å²
   
âœ… å†åˆ©ç”¨æ€§ã®é«˜ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
   â†’ ä¾‹: ã‚«ã‚¹ã‚¿ãƒ ã®å…¥åŠ›ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
```

---

## ğŸ› ï¸ æ¨å¥¨ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«

### E2Eãƒ†ã‚¹ãƒˆ

| ãƒ„ãƒ¼ãƒ« | è©•ä¾¡ | ç†ç”± |
|--------|------|------|
| **Playwright** | â­â­â­â­â­ | **æ¨å¥¨ï¼**é«˜é€Ÿã€å®‰å®šã€å…¬å¼ã‚µãƒãƒ¼ãƒˆå……å®Ÿ |
| Cypress | â­â­â­â­ | äººæ°—ã ãŒå°‘ã—é‡ã„ |
| Puppeteer | â­â­â­ | ä½ãƒ¬ãƒ™ãƒ«APIã€å­¦ç¿’ã‚³ã‚¹ãƒˆé«˜ |

### å˜ä½“ãƒ†ã‚¹ãƒˆ

| ãƒ„ãƒ¼ãƒ« | è©•ä¾¡ | ç†ç”± |
|--------|------|------|
| **Vitest** | â­â­â­â­â­ | **æ¨å¥¨ï¼**Viteã¨ã®ç›¸æ€§æŠœç¾¤ã€é«˜é€Ÿ |
| Jest | â­â­â­â­ | å®šç•ªã ãŒViteã¨ã®çµ±åˆãŒå¾®å¦™ |

---

## ğŸ“Š å…·ä½“çš„ãªãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

### ç¾å®Ÿçš„ãªç›®æ¨™
```
âœ… E2Eãƒ†ã‚¹ãƒˆ: ä¸»è¦ãƒ•ãƒ­ãƒ¼ 100%
   â†’ ãƒ­ã‚°ã‚¤ãƒ³ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼CRUDã€æ¨©é™ãƒã‚§ãƒƒã‚¯

âœ… å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆãƒ­ã‚¸ãƒƒã‚¯å±¤ã®ã¿ï¼‰: 80%
   â†’ utils/, composables/ ã®é‡è¦é–¢æ•°

âŒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ: 0%ï¼ˆã‚¹ã‚­ãƒƒãƒ—ï¼‰
   â†’ E2Eã§ã‚«ãƒãƒ¼

ç·åˆã‚«ãƒãƒ¬ãƒƒã‚¸: 60ã€œ70% ã§ååˆ†
```

---

## ğŸ“ ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ validation.js
â”‚   â””â”€â”€ composables/
â”‚       â””â”€â”€ useValidation.js
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/                    # å˜ä½“ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â””â”€â”€ validation.spec.js
â”‚   â”‚   â””â”€â”€ composables/
â”‚   â”‚       â””â”€â”€ useValidation.spec.js
â”‚   â”‚
â”‚   â””â”€â”€ e2e/                     # E2Eãƒ†ã‚¹ãƒˆ
â”‚       â”œâ”€â”€ auth.spec.js         # ğŸ”´ æœ€å„ªå…ˆ
â”‚       â”œâ”€â”€ users-crud.spec.js   # ğŸ”´ æœ€å„ªå…ˆ
â”‚       â”œâ”€â”€ permissions.spec.js  # ğŸ”´ æœ€å„ªå…ˆ
â”‚       â”œâ”€â”€ search.spec.js       # ğŸŸ¡ æ¨å¥¨
â”‚       â””â”€â”€ responsive.spec.js   # ğŸŸ¢ ã‚ªãƒ—ã‚·ãƒ§ãƒ³
â”‚
â”œâ”€â”€ playwright.config.js         # Playwrightè¨­å®š
â””â”€â”€ vitest.config.js            # Vitestè¨­å®š
```

---

## ğŸ¯ ãƒ†ã‚¹ãƒˆå®Ÿè£…ã®é †åº

### ãƒ•ã‚§ãƒ¼ã‚º1: E2Eãƒ†ã‚¹ãƒˆã®åŸºç›¤æ§‹ç¯‰ï¼ˆ1ã€œ2æ—¥ï¼‰
```
1. Playwrightã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
2. ãƒ­ã‚°ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆã®å®Ÿè£…
3. CI/CDã¸ã®çµ„ã¿è¾¼ã¿
```

### ãƒ•ã‚§ãƒ¼ã‚º2: ä¸»è¦ãƒ•ãƒ­ãƒ¼ã®E2Eãƒ†ã‚¹ãƒˆï¼ˆ2ã€œ3æ—¥ï¼‰
```
4. ãƒ¦ãƒ¼ã‚¶ãƒ¼CRUDãƒ†ã‚¹ãƒˆ
5. æ¨©é™ãƒã‚§ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
6. æ¤œç´¢ãƒ»ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
```

### ãƒ•ã‚§ãƒ¼ã‚º3: å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆ1ã€œ2æ—¥ï¼‰
```
7. validation.js ã®ãƒ†ã‚¹ãƒˆ
8. useValidation.js ã®ãƒ†ã‚¹ãƒˆ
9. useApiError.js ã®ãƒ†ã‚¹ãƒˆ
```

### ãƒ•ã‚§ãƒ¼ã‚º4: ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆä½™è£•ãŒã‚ã‚Œã°ï¼‰
```
10. å¤šè¨€èªãƒ†ã‚¹ãƒˆ
11. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆ
12. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ
```

---

## ğŸ’¡ ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¹ãã‹åˆ¤æ–­åŸºæº–

### âœ… ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¹ã
```
âœ… ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€è¨ˆç®—ï¼‰
âœ… èªè¨¼ãƒ»èªå¯ã®æŒ™å‹•
âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›´æ¥æ“ä½œã™ã‚‹ä¸»è¦ãƒ•ãƒ­ãƒ¼
âœ… ãƒã‚°ãŒç™ºç”Ÿã—ã‚„ã™ã„ç®‡æ‰€ï¼ˆéå»ã®å®Ÿç¸¾ï¼‰
```

### âŒ ãƒ†ã‚¹ãƒˆã‚’æ›¸ã‹ãªãã¦è‰¯ã„
```
âŒ å˜ç´”ãªãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼ˆè¡¨ç¤ºã ã‘ï¼‰
âŒ Vuetifyã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ©ãƒƒãƒ‘ãƒ¼
âŒ é™çš„ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆconstants/ï¼‰
âŒ ã‚¹ã‚¿ã‚¤ãƒ«ã®è¡¨ç¤ºç¢ºèª
```

---

## ğŸ“ ãƒ†ã‚¹ãƒˆã®å­¦ç¿’ã‚³ã‚¹ãƒˆ vs åŠ¹æœ

| ãƒ†ã‚¹ãƒˆç¨®é¡ | å­¦ç¿’æ™‚é–“ | å®Ÿè£…æ™‚é–“ | åŠ¹æœ | ã‚³ã‚¹ãƒ‘ |
|-----------|---------|---------|------|--------|
| **E2E** | 2ã€œ3æ—¥ | ä¸­ | é«˜ | â­â­â­â­â­ |
| **å˜ä½“ï¼ˆãƒ­ã‚¸ãƒƒã‚¯ï¼‰** | 1æ—¥ | ä½ | ä¸­ | â­â­â­â­ |
| **å˜ä½“ï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰** | 3ã€œ4æ—¥ | é«˜ | ä½ | â­â­ |

---

## ğŸ“‹ ã¾ã¨ã‚: ã‚ãªãŸã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚„ã‚‹ã¹ãã“ã¨

### ğŸ¯ **æœ€å°é™ã®æ¨å¥¨æ§‹æˆ**
```
âœ… E2Eãƒ†ã‚¹ãƒˆ: ä¸»è¦ãƒ•ãƒ­ãƒ¼ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ã€CRUDã€æ¨©é™ï¼‰
âœ… å˜ä½“ãƒ†ã‚¹ãƒˆ: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã®ã¿

åˆè¨ˆå®Ÿè£…æ™‚é–“: 4ã€œ6æ—¥
ã‚«ãƒãƒ¬ãƒƒã‚¸: 60ã€œ70%
```

### ğŸš€ **ä½™è£•ãŒã‚ã‚Œã°è¿½åŠ **
```
âœ… E2Eãƒ†ã‚¹ãƒˆ: æ¤œç´¢ã€ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã€å¤šè¨€èª
âœ… å˜ä½“ãƒ†ã‚¹ãƒˆ: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

åˆè¨ˆå®Ÿè£…æ™‚é–“: 8ã€œ10æ—¥
ã‚«ãƒãƒ¬ãƒƒã‚¸: 80ã€œ85%
âœ… çµè«–
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãªã‚‰:

E2Eãƒ†ã‚¹ãƒˆï¼ˆPlaywrightï¼‰ã§ä¸»è¦ãƒ•ãƒ­ãƒ¼ã‚’ã‚«ãƒãƒ¼ â† å¿…é ˆ
å˜ä½“ãƒ†ã‚¹ãƒˆã¯ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã®ã¿ â† æ¨å¥¨
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆã¯ã‚¹ã‚­ãƒƒãƒ— â† æ™‚é–“ã®ç„¡é§„
ã“ã‚Œã§ååˆ†ã§ã™ï¼ (Â´ãƒ»Ï‰ãƒ»`)b

æº–å‚™ãŒã§ããŸã‚‰ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰å®Ÿè£…ã®ã‚µãƒãƒ¼ãƒˆã‚‚ã§ãã¾ã™ã‚ˆï¼(ï¼¾Ï‰ï¼¾)ï¾ï¾Ÿï¾›ï¾ï¾Ÿï¾›


ãµã‚€ãµã‚€(Â´ãƒ»Ï‰ãƒ»ï½€)
å…·ä½“çš„ã«æ¨å¥¨ãƒ»å¿…é ˆã¯ã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚‰ã¸ã‚“ï¼Ÿï¼ˆcomponentç³»ã¯å¤‰ã‚ã‚‹ãŸã³ãƒ†ã‚¹ãƒˆã¯ç¢ºã‹ã«ç„¡é§„ã‚„ã—ã‚¹ãƒ«ãƒ¼ã‹ãª(Â´ãƒ»Ï‰ãƒ»ï½€)ï¼‰

ğŸ¯ å…·ä½“çš„ãªãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§
ğŸ”´ å¿…é ˆï¼ˆçµ¶å¯¾ã«ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¹ãï¼‰
1ï¸âƒ£ E2Eãƒ†ã‚¹ãƒˆï¼ˆPlaywrightï¼‰
tests/e2e/
â”œâ”€â”€ 01-auth.spec.js              # èªè¨¼ãƒ•ãƒ­ãƒ¼
â”‚   â”œâ”€â”€ ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ
â”‚   â”œâ”€â”€ ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—ï¼ˆç¤¾å“¡ç•ªå·ã‚¨ãƒ©ãƒ¼ï¼‰
â”‚   â”œâ”€â”€ ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—ï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼ï¼‰
â”‚   â”œâ”€â”€ ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
â”‚   â””â”€â”€ æœªèªè¨¼æ™‚ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
â”‚
â”œâ”€â”€ 02-users-crud.spec.js        # ãƒ¦ãƒ¼ã‚¶ãƒ¼CRUD
â”‚   â”œâ”€â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§è¡¨ç¤º
â”‚   â”œâ”€â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
â”‚   â”œâ”€â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°è¡¨ç¤º
â”‚   â”œâ”€â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç·¨é›†
â”‚   â””â”€â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤
â”‚
â””â”€â”€ 03-permissions.spec.js       # æ¨©é™ãƒã‚§ãƒƒã‚¯
    â”œâ”€â”€ ç®¡ç†è€…ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ãªç”»é¢
    â”œâ”€â”€ ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç®¡ç†ç”»é¢ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦
    â””â”€â”€ æœ€å¾Œã®ç®¡ç†è€…å‰Šé™¤é˜²æ­¢
ç†ç”±:

âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›´æ¥æ“ä½œã™ã‚‹ä¸»è¦ãƒ•ãƒ­ãƒ¼
âœ… ãƒã‚°ãŒç™ºç”Ÿã™ã‚‹ã¨è‡´å‘½çš„
âœ… ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ä¸­æ ¸
2ï¸âƒ£ å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆVitestï¼‰
ğŸ“‚ src/utils/validation.js
javascript
tests/unit/utils/validation.spec.js

ãƒ†ã‚¹ãƒˆé …ç›®:
â”œâ”€â”€ createValidationRules()
â”‚   â”œâ”€â”€ required() - å¿…é ˆãƒã‚§ãƒƒã‚¯
â”‚   â”œâ”€â”€ maxLength() - æœ€å¤§æ–‡å­—æ•°
â”‚   â”œâ”€â”€ minLength() - æœ€å°æ–‡å­—æ•°
â”‚   â”œâ”€â”€ email() - ãƒ¡ãƒ¼ãƒ«å½¢å¼
â”‚   â”œâ”€â”€ alphaNumeric() - è‹±æ•°å­—
â”‚   â”œâ”€â”€ employeeId() - ç¤¾å“¡ç•ªå·å½¢å¼
â”‚   â””â”€â”€ passwordStrength() - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¼·åº¦
ç†ç”±:

âœ… ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ä¸­æ ¸
âœ… ãƒã‚°ãŒç™ºç”Ÿã—ã‚„ã™ã„
âœ… ä»–ã®æ©Ÿèƒ½ã¸ã®å½±éŸ¿ãŒå¤§ãã„
ğŸ“‚ src/composables/useValidation.js
javascript
tests/unit/composables/useValidation.spec.js

ãƒ†ã‚¹ãƒˆé …ç›®:
â”œâ”€â”€ createRules.loginEmployeeId()
â”œâ”€â”€ createRules.loginPassword()
â”œâ”€â”€ createRules.username()
â”œâ”€â”€ createRules.employeeId()
â”œâ”€â”€ createRules.newPassword()
â””â”€â”€ createRules.passwordConfirm()
```

**ç†ç”±:**
- âœ… ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®è¦
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã«ç›´çµ
- âœ… validation.js ã¸ã®ä¾å­˜ãŒæ­£ã—ã„ã‹ç¢ºèª

---

## ğŸŸ¡ **æ¨å¥¨ï¼ˆä½™è£•ãŒã‚ã‚Œã°ãƒ†ã‚¹ãƒˆã‚’æ›¸ãï¼‰**

### 3ï¸âƒ£ **E2Eãƒ†ã‚¹ãƒˆï¼ˆè¿½åŠ æ©Ÿèƒ½ï¼‰**
```
tests/e2e/
â”œâ”€â”€ 04-user-search.spec.js       # æ¤œç´¢æ©Ÿèƒ½
â”‚   â”œâ”€â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼åæ¤œç´¢
â”‚   â”œâ”€â”€ ç¤¾å“¡ç•ªå·æ¤œç´¢
â”‚   â””â”€â”€ æ¤œç´¢çµæœ0ä»¶
â”‚
â”œâ”€â”€ 05-pagination.spec.js        # ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ ãƒšãƒ¼ã‚¸ç§»å‹•
â”‚   â”œâ”€â”€ è¡¨ç¤ºä»¶æ•°å¤‰æ›´
â”‚   â””â”€â”€ æœ€çµ‚ãƒšãƒ¼ã‚¸
â”‚
â”œâ”€â”€ 06-sorting.spec.js           # ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½
â”‚   â”œâ”€â”€ IDæ˜‡é †ãƒ»é™é †
â”‚   â”œâ”€â”€ ç¤¾å“¡ç•ªå·æ˜‡é †ãƒ»é™é †
â”‚   â””â”€â”€ ç®¡ç†è€…ãƒ•ãƒ©ã‚°ã‚½ãƒ¼ãƒˆ
â”‚
â””â”€â”€ 07-language.spec.js          # å¤šè¨€èª
    â”œâ”€â”€ æ—¥æœ¬èªâ†’è‹±èªåˆ‡ã‚Šæ›¿ãˆ
    â””â”€â”€ è‹±èªâ†’æ—¥æœ¬èªåˆ‡ã‚Šæ›¿ãˆ
ç†ç”±:

âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Šã«å¯„ä¸
âœ… ãƒã‚°ãŒç™ºç”Ÿã—ã¦ã‚‚è‡´å‘½çš„ã§ã¯ãªã„
âš ï¸ æ™‚é–“ãŒã‚ã‚Œã°å®Ÿè£…
4ï¸âƒ£ å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆè¿½åŠ ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
ğŸ“‚ src/composables/useApiError.js
javascript
tests/unit/composables/useApiError.spec.js

ãƒ†ã‚¹ãƒˆé …ç›®:
â”œâ”€â”€ handleApiError()
â”‚   â”œâ”€â”€ detail ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†
â”‚   â”œâ”€â”€ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åˆ¥ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†
â”‚   â”œâ”€â”€ error_code ã‹ã‚‰ã®ç¿»è¨³
â”‚   â””â”€â”€ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†
â”‚
â”œâ”€â”€ showSuccess()
â”œâ”€â”€ showWarning()
â””â”€â”€ showInfo()
ç†ç”±:

âœ… ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®é€šçŸ¥å“è³ªã«å½±éŸ¿
âš ï¸ E2Eã§ã‚‚ã‚ã‚‹ç¨‹åº¦ã‚«ãƒãƒ¼å¯èƒ½
ğŸ“‚ src/stores/auth.js
javascript
tests/unit/stores/auth.spec.js

ãƒ†ã‚¹ãƒˆé …ç›®:
â”œâ”€â”€ loginSession() - ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†
â”œâ”€â”€ logout() - ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†
â”œâ”€â”€ initialize() - åˆæœŸåŒ–
â”œâ”€â”€ validateSession() - ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œè¨¼
â””â”€â”€ isAuthenticated - èªè¨¼çŠ¶æ…‹ã®è¨ˆç®—
```

**ç†ç”±:**
- âœ… èªè¨¼çŠ¶æ…‹ç®¡ç†ã®è¦
- âš ï¸ E2Eã§ã‹ãªã‚Šã‚«ãƒãƒ¼ã•ã‚Œã‚‹
- âš ï¸ Pinia + axios ã®ãƒ¢ãƒƒã‚¯åŒ–ãŒã‚„ã‚„é¢å€’

---

## ğŸŸ¢ **ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆæ™‚é–“ãŒã‚ã‚Œã°ï¼‰**

### 5ï¸âƒ£ **E2Eãƒ†ã‚¹ãƒˆï¼ˆã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ï¼‰**
```
tests/e2e/
â”œâ”€â”€ 08-validation-errors.spec.js  # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
â”‚   â”œâ”€â”€ ç¤¾å“¡ç•ªå·å½¢å¼ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
â”‚   â”œâ”€â”€ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¼·åº¦ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
â”‚   â””â”€â”€ ç¢ºèªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ä¸ä¸€è‡´
â”‚
â”œâ”€â”€ 09-responsive.spec.js         # ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–
â”‚   â”œâ”€â”€ 768pxæœªæº€ã§éå¯¾å¿œç”»é¢è¡¨ç¤º
â”‚   â””â”€â”€ 768pxä»¥ä¸Šã§é€šå¸¸ç”»é¢è¡¨ç¤º
â”‚
â””â”€â”€ 10-error-handling.spec.js     # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
    â”œâ”€â”€ APIã‚¨ãƒ©ãƒ¼æ™‚ã®é€šçŸ¥è¡¨ç¤º
    â”œâ”€â”€ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼æ™‚ã®é€šçŸ¥
    â””â”€â”€ ã‚»ãƒƒã‚·ãƒ§ãƒ³æœŸé™åˆ‡ã‚Œ
ç†ç”±:

âš ï¸ ç™ºç”Ÿé »åº¦ãŒä½ã„
âš ï¸ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®å½±éŸ¿ã‚‚å°ã•ã„
âš ï¸ æ‰‹å‹•ãƒ†ã‚¹ãƒˆã§ã‚‚ååˆ†
6ï¸âƒ£ å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆãã®ä»–Storeï¼‰
ğŸ“‚ src/stores/notification.js
javascript
tests/unit/stores/notification.spec.js

ãƒ†ã‚¹ãƒˆé …ç›®:
â”œâ”€â”€ success() - æˆåŠŸé€šçŸ¥
â”œâ”€â”€ error() - ã‚¨ãƒ©ãƒ¼é€šçŸ¥
â”œâ”€â”€ warning() - è­¦å‘Šé€šçŸ¥
â””â”€â”€ info() - æƒ…å ±é€šçŸ¥
ç†ç”±:

âš ï¸ ãƒ­ã‚¸ãƒƒã‚¯ãŒã‚·ãƒ³ãƒ—ãƒ«
âš ï¸ E2Eã§ã‚«ãƒãƒ¼å¯èƒ½
ğŸ“‚ src/stores/locale.js
javascript
tests/unit/stores/locale.spec.js

ãƒ†ã‚¹ãƒˆé …ç›®:
â”œâ”€â”€ setLocale() - è¨€èªåˆ‡ã‚Šæ›¿ãˆ
â””â”€â”€ localStorage ã¸ã®ä¿å­˜
ç†ç”±:

âš ï¸ ãƒ­ã‚¸ãƒƒã‚¯ãŒã‚·ãƒ³ãƒ—ãƒ«
âš ï¸ E2Eã§ã‚«ãƒãƒ¼å¯èƒ½
ğŸ“‚ src/stores/ui.js
javascript
tests/unit/stores/ui.spec.js

ãƒ†ã‚¹ãƒˆé …ç›®:
â”œâ”€â”€ toggleDrawer() - ã‚µã‚¤ãƒ‰ãƒãƒ¼é–‹é–‰
â”œâ”€â”€ toggleRail() - ãƒ¬ãƒ¼ãƒ«åˆ‡ã‚Šæ›¿ãˆ
â””â”€â”€ ç”»é¢ã‚µã‚¤ã‚ºå¤‰æ›´æ™‚ã®è‡ªå‹•èª¿æ•´
```

**ç†ç”±:**
- âš ï¸ UIçŠ¶æ…‹ç®¡ç†ã®ã¿
- âš ï¸ E2Eã§ã‚«ãƒãƒ¼å¯èƒ½

---

## âŒ **ãƒ†ã‚¹ãƒˆä¸è¦ï¼ˆã‚¹ã‚­ãƒƒãƒ—æ¨å¥¨ï¼‰**

### ğŸ“‚ Componentsï¼ˆã™ã¹ã¦ã‚¹ã‚­ãƒƒãƒ—ï¼‰
```
âŒ src/components/Header.vue
âŒ src/components/Footer.vue
âŒ src/components/NavBar.vue
âŒ src/components/SideBar.vue
âŒ src/components/Notification.vue
âŒ src/components/MenuCard.vue
âŒ src/components/MenuCardGrid.vue
âŒ src/components/ConfirmDialog.vue
```

**ç†ç”±:**
- âŒ ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤
- âŒ E2Eã§ååˆ†ã‚«ãƒãƒ¼
- âŒ UIå¤‰æ›´ã®ãŸã³ã«ãƒ†ã‚¹ãƒˆä¿®æ­£ãŒå¿…è¦

---

### ğŸ“‚ Viewsï¼ˆã™ã¹ã¦ã‚¹ã‚­ãƒƒãƒ—ï¼‰
```
âŒ src/views/Login.vue
âŒ src/views/Home.vue
âŒ src/views/Settings.vue
âŒ src/views/admin/AdminMenu.vue
âŒ src/views/users/UserList.vue
âŒ src/views/users/UserCreate.vue
âŒ src/views/users/UserDetail.vue
âŒ src/views/users/UserUpdate.vue
âŒ src/views/users/UserDelete.vue
âŒ src/views/errors/UnsupportedDevice.vue
```

**ç†ç”±:**
- âŒ E2Eã§å®Œå…¨ã«ã‚«ãƒãƒ¼å¯èƒ½
- âŒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆã®ä¿å®ˆã‚³ã‚¹ãƒˆãŒé«˜ã„

---

### ğŸ“‚ ãã®ä»–ï¼ˆãƒ†ã‚¹ãƒˆä¸è¦ï¼‰
```
âŒ src/constants/ - ã™ã¹ã¦ï¼ˆé™çš„ãªå®šç¾©ã®ã¿ï¼‰
âŒ src/plugins/ - ã™ã¹ã¦ï¼ˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
âŒ src/router/ - ã™ã¹ã¦ï¼ˆE2Eã§ã‚«ãƒãƒ¼ï¼‰
âŒ src/api/ - ã™ã¹ã¦ï¼ˆE2Eã§ã‚«ãƒãƒ¼ï¼‰
âŒ src/assets/ - ã™ã¹ã¦ï¼ˆé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
âŒ src/locales/ - ã™ã¹ã¦ï¼ˆç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
âŒ src/composables/usePermissions.js - ã‚·ãƒ³ãƒ—ãƒ«
```

**ç†ç”±:**
- âŒ ãƒ­ã‚¸ãƒƒã‚¯ãŒãªã„ã€ã¾ãŸã¯éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«
- âŒ E2Eã§è‡ªå‹•çš„ã«ãƒ†ã‚¹ãƒˆã•ã‚Œã‚‹

---

## ğŸ“Š å„ªå…ˆåº¦ãƒãƒˆãƒªãƒƒã‚¯ã‚¹

| ãƒ•ã‚¡ã‚¤ãƒ« | å„ªå…ˆåº¦ | ãƒ†ã‚¹ãƒˆç¨®é¡ | å®Ÿè£…æ™‚é–“ |
|---------|--------|-----------|---------|
| **E2E: èªè¨¼ãƒ•ãƒ­ãƒ¼** | ğŸ”´ å¿…é ˆ | E2E | 2æ™‚é–“ |
| **E2E: ãƒ¦ãƒ¼ã‚¶ãƒ¼CRUD** | ğŸ”´ å¿…é ˆ | E2E | 3æ™‚é–“ |
| **E2E: æ¨©é™ãƒã‚§ãƒƒã‚¯** | ğŸ”´ å¿…é ˆ | E2E | 1æ™‚é–“ |
| **utils/validation.js** | ğŸ”´ å¿…é ˆ | å˜ä½“ | 2æ™‚é–“ |
| **composables/useValidation.js** | ğŸ”´ å¿…é ˆ | å˜ä½“ | 1æ™‚é–“ |
| **E2E: æ¤œç´¢** | ğŸŸ¡ æ¨å¥¨ | E2E | 1æ™‚é–“ |
| **E2E: ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³** | ğŸŸ¡ æ¨å¥¨ | E2E | 1æ™‚é–“ |
| **E2E: ã‚½ãƒ¼ãƒˆ** | ğŸŸ¡ æ¨å¥¨ | E2E | 1æ™‚é–“ |
| **composables/useApiError.js** | ğŸŸ¡ æ¨å¥¨ | å˜ä½“ | 2æ™‚é–“ |
| **stores/auth.js** | ğŸŸ¡ æ¨å¥¨ | å˜ä½“ | 3æ™‚é–“ |
| **E2E: å¤šè¨€èª** | ğŸŸ¢ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | E2E | 1æ™‚é–“ |
| **ãã®ä»–ã®ã‚¹ãƒˆã‚¢** | ğŸŸ¢ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | å˜ä½“ | å„1æ™‚é–“ |

---

## âœ… ã¾ã¨ã‚: å®Ÿè£…ã™ã‚‹é †åº

### **ãƒ•ã‚§ãƒ¼ã‚º1: å¿…é ˆï¼ˆåˆè¨ˆ9æ™‚é–“ï¼‰**
```
1. E2E: èªè¨¼ãƒ•ãƒ­ãƒ¼ (2h)
2. E2E: ãƒ¦ãƒ¼ã‚¶ãƒ¼CRUD (3h)
3. E2E: æ¨©é™ãƒã‚§ãƒƒã‚¯ (1h)
4. å˜ä½“: utils/validation.js (2h)
5. å˜ä½“: composables/useValidation.js (1h)
```

### **ãƒ•ã‚§ãƒ¼ã‚º2: æ¨å¥¨ï¼ˆåˆè¨ˆ9æ™‚é–“ï¼‰**
```
6. E2E: æ¤œç´¢ (1h)
7. E2E: ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ (1h)
8. E2E: ã‚½ãƒ¼ãƒˆ (1h)
9. å˜ä½“: composables/useApiError.js (2h)
10. å˜ä½“: stores/auth.js (3h) â† Pinia ãƒ¢ãƒƒã‚¯åŒ–ãŒã‚„ã‚„é¢å€’
```

### **ãƒ•ã‚§ãƒ¼ã‚º3: ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆä½™è£•ãŒã‚ã‚Œã°ï¼‰**
```
11. E2E: å¤šè¨€èª (1h)
12. å˜ä½“: ãã®ä»–ã®ã‚¹ãƒˆã‚¢ (å„1h)
```

---

## ğŸ¯ **çµè«–: æœ€å°æ§‹æˆãªã‚‰ã“ã‚Œã ã‘ï¼**
```
âœ… E2E: èªè¨¼ + CRUD + æ¨©é™ (6æ™‚é–“)
âœ… å˜ä½“: validation.js + useValidation.js (3æ™‚é–“)

åˆè¨ˆ: 9æ™‚é–“ã§æ ¸å¿ƒéƒ¨åˆ†ã‚’ã‚«ãƒãƒ¼
ã‚«ãƒãƒ¬ãƒƒã‚¸: ç´„60%
ã“ã‚Œã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ååˆ†ãªå“è³ªã§ã™ï¼(Â´ãƒ»Ï‰ãƒ»`)b


====================================================================================================
====================================================================================================
====================================================================================================

vscodeã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰â†’ã‚¨ãƒ©ãƒ¼ãªã—ã€è­¦å‘Šï¼ˆæ„å›³çš„ãªæŠ‘åˆ¶ï¼‘ä»¶ã‚’é™¤ãï¼‰ãªã—ã€ãƒ•ãƒ­ãƒ³ãƒˆå´ã‚‚åŒæ§˜ã«ã‚¨ãƒ©ãƒ¼ãƒ»è­¦å‘Šãªã—ã€‚ã“ã“ã¾ã§ããŸã‚‰ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã ã—ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãæ„Ÿã˜ï¼Ÿ
ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯
views,serialize,serviceã‚¯ãƒ©ã‚¹,ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿,è«–ç†å‰Šé™¤,å›½éš›åŒ–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼Ÿãƒ­ã‚°ã‚¤ãƒ³èªè¨¼å‘¨ã‚Šã€settingsã‚‚ã‚„ã‚‹ã‚“ã‹ãªï¼Ÿ
ã“ã®ã‚ãŸã‚Šã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰æ›¸ãæ„Ÿã˜ï¼Ÿã¾ã ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯å‡ºã•ãªãã¦ã„ã„ã‘ã©ã€ã©ã“ã¾ã§ã‚„ã‚‹ã‹æ¼ã‚Œã¦ãŸã‚‰æ•™ãˆã¦(ï¼¾Ï‰ï¼¾)

ğŸ§ª ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰è¨ˆç”»ãƒã‚§ãƒƒã‚¯
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ æœ€ä½é™å¿…è¦ãªãƒ†ã‚¹ãƒˆ ã¨ ã‚ã‚‹ã¨è‰¯ã„ãƒ†ã‚¹ãƒˆ ã‚’æ•´ç†ã—ã¾ã™!

âœ… ã‚ãªãŸã®æŒ™ã’ãŸãƒ†ã‚¹ãƒˆé …ç›®
é …ç›®	å¿…è¦åº¦	ç†ç”±
views	ğŸ”´ å¿…é ˆ	API ã®å‹•ä½œä¿è¨¼
serializers	ğŸ”´ å¿…é ˆ	ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä¿è¨¼
service ã‚¯ãƒ©ã‚¹	ğŸ”´ å¿…é ˆ	ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ä¿è¨¼
ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿	ğŸŸ¡ ä»»æ„	ã‚³ãƒãƒ³ãƒ‰ã®å‹•ä½œç¢ºèª
è«–ç†å‰Šé™¤	ğŸ”´ å¿…é ˆ	é‡è¦ãªæ©Ÿèƒ½
å›½éš›åŒ–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸	ğŸŸ¢ æ¨å¥¨	ç¿»è¨³æ¼ã‚Œé˜²æ­¢
ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼å‘¨ã‚Š	ğŸ”´ å¿…é ˆ	ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¿è¨¼
settings	ğŸŸ¢ æ¨å¥¨	ç’°å¢ƒè¨­å®šã®å¦¥å½“æ€§
ğŸ“‹ ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰å®Œå…¨ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
ğŸ”´ çµ¶å¯¾å¿…è¦ï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦å¿…é ˆï¼‰
1. èªè¨¼ãƒ†ã‚¹ãƒˆï¼ˆaccounts/ï¼‰
python
# tests/test_auth.py
- âœ… ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ
- âœ… ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—ï¼ˆå­˜åœ¨ã—ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
- âœ… ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—ï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰é–“é•ã„ï¼‰
- âœ… ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—ï¼ˆå‰Šé™¤æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰â˜…
- âœ… ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—ï¼ˆç„¡åŠ¹åŒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰â˜…
- âœ… ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹å¯¾ç­–ï¼ˆ10å›å¤±æ•—ã§ãƒ­ãƒƒã‚¯ï¼‰
- âœ… ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒƒã‚¯è§£é™¤ï¼ˆ60ç§’å¾Œï¼‰
- âœ… ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæˆåŠŸ
- âœ… ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—ï¼ˆ/api/auth/me/ï¼‰
- âœ… CSRFãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«ãƒ†ã‚¹ãƒˆï¼ˆusers/models.pyï¼‰
python
# tests/test_models.py
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
- âœ… è«–ç†å‰Šé™¤ï¼ˆsoft_deleteï¼‰â˜…
- âœ… å¾©å…ƒï¼ˆrestoreï¼‰â˜…
- âœ… ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–
- âœ… æ¡ä»¶ä»˜ããƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ï¼ˆå‰Šé™¤æ¸ˆã¿ç¤¾å“¡ç•ªå·ã®å†åˆ©ç”¨ï¼‰â˜…
- âœ… ã‚«ã‚¹ã‚¿ãƒ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼ˆUser.objects / User.all_objectsï¼‰â˜…
- âœ… display_name ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
3. ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ãƒ¼ãƒ†ã‚¹ãƒˆï¼ˆusers/serializers.pyï¼‰
python
# tests/test_serializers.py
- âœ… UserCreateSerializer: æ­£å¸¸ç³»
- âœ… UserCreateSerializer: employee_id å¿…é ˆãƒã‚§ãƒƒã‚¯
- âœ… UserCreateSerializer: employee_id é‡è¤‡ãƒã‚§ãƒƒã‚¯â˜…
- âœ… UserCreateSerializer: password æœ€å°æ–‡å­—æ•°
- âœ… UserCreateSerializer: email å½¢å¼ãƒã‚§ãƒƒã‚¯
- âœ… UserUpdateSerializer: æ­£å¸¸ç³»
- âœ… UserUpdateSerializer: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç©ºæ¬„ï¼ˆå¤‰æ›´ãªã—ï¼‰
- âœ… BulkActionSerializer: ids å¿…é ˆãƒã‚§ãƒƒã‚¯
- âœ… BulkActionSerializer: é‡è¤‡IDé™¤å»
4. ã‚µãƒ¼ãƒ“ã‚¹ã‚¯ãƒ©ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆusers/services/user_service.pyï¼‰
python
# tests/test_services.py
- âœ… create_user: æ­£å¸¸ç³»
- âœ… update_user: æ­£å¸¸ç³»
- âœ… update_user: updated_at ãŒæ›´æ–°ã•ã‚Œã‚‹â˜…
- âœ… delete_user: è«–ç†å‰Šé™¤ã•ã‚Œã‚‹â˜…
- âœ… delete_user: è‡ªå·±å‰Šé™¤ã‚¨ãƒ©ãƒ¼
- âœ… delete_user: æœ€å¾Œã®ç®¡ç†è€…ã‚¨ãƒ©ãƒ¼â˜…
- âœ… update_user: æœ€å¾Œã®ç®¡ç†è€…ã®æ¨©é™å‰¥å¥ªã‚¨ãƒ©ãƒ¼â˜…
- âœ… update_user: æœ€å¾Œã®ç®¡ç†è€…ã®ç„¡åŠ¹åŒ–ã‚¨ãƒ©ãƒ¼â˜…
- âœ… restore_user: å¾©å…ƒæˆåŠŸâ˜…
- âœ… bulk_delete_users: æ­£å¸¸ç³»
- âœ… bulk_restore_users: æ­£å¸¸ç³»
5. API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ†ã‚¹ãƒˆï¼ˆusers/views.pyï¼‰
python
# tests/test_api.py
- âœ… GET /api/users/: ä¸€è¦§å–å¾—
- âœ… GET /api/users/: ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
- âœ… GET /api/users/: ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆis_admin, is_activeï¼‰
- âœ… GET /api/users/: æ¤œç´¢ï¼ˆemployee_id, usernameï¼‰
- âœ… GET /api/users/1/: è©³ç´°å–å¾—
- âœ… POST /api/users/: ä½œæˆ
- âœ… PUT /api/users/1/: æ›´æ–°
- âœ… PATCH /api/users/1/: éƒ¨åˆ†æ›´æ–°
- âœ… DELETE /api/users/1/: å‰Šé™¤ï¼ˆè«–ç†ï¼‰â˜…
- âœ… POST /api/users/bulk-delete/: ä¸€æ‹¬å‰Šé™¤
- âœ… POST /api/users/bulk-restore/: ä¸€æ‹¬å¾©å…ƒ
- âœ… POST /api/users/1/restore/: å¾©å…ƒ
- âœ… GET /api/users/deleted/: å‰Šé™¤æ¸ˆã¿ä¸€è¦§â˜…
- âœ… GET /api/users/stats/: çµ±è¨ˆæƒ…å ±
- âœ… GET /api/users/admin-count/: ç®¡ç†è€…æ•°
6. æ¨©é™ãƒ†ã‚¹ãƒˆï¼ˆusers/permissions.pyï¼‰
python
# tests/test_permissions.py
- âœ… IsAdminUser: ç®¡ç†è€…ã¯ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- âœ… IsAdminUser: ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯
- âœ… IsAdminUser: æœªãƒ­ã‚°ã‚¤ãƒ³ã¯ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯
7. ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–ãƒ†ã‚¹ãƒˆï¼ˆusers/exceptions.pyï¼‰
python
# tests/test_exceptions.py
- âœ… LastAdminError: ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç¢ºèª
- âœ… CannotDeleteSelfError: ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç¢ºèª
- âœ… UserNotFoundError: ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç¢ºèª
ğŸŸ¢ æ¨å¥¨ï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦æœ›ã¾ã—ã„ï¼‰
8. å›½éš›åŒ–ãƒ†ã‚¹ãƒˆ
python
# tests/test_i18n.py
- âœ… æ—¥æœ¬èªç’°å¢ƒã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—
- âœ… è‹±èªç’°å¢ƒã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—
- âœ… Accept-Language ãƒ˜ãƒƒãƒ€ãƒ¼ã§è¨€èªåˆ‡ã‚Šæ›¿ãˆ
- âœ… ç¿»è¨³æ¼ã‚Œãƒã‚§ãƒƒã‚¯ï¼ˆå…¨msgid ã«å¯¾å¿œã™ã‚‹ msgstr ãŒã‚ã‚‹ï¼‰
9. ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãƒ†ã‚¹ãƒˆ
python
# tests/test_middleware.py
- âœ… LanguageMiddleware: æ—¥æœ¬èªãƒ˜ãƒƒãƒ€ãƒ¼ã§æ—¥æœ¬èªã«ãªã‚‹
- âœ… LanguageMiddleware: è‹±èªãƒ˜ãƒƒãƒ€ãƒ¼ã§è‹±èªã«ãªã‚‹
- âœ… LanguageMiddleware: ä¸æ­£ãªãƒ˜ãƒƒãƒ€ãƒ¼ã§ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
- âœ… LanguageMiddleware: æœªå¯¾å¿œè¨€èªã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
10. èªè¨¼ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
python
# tests/test_backends.py
- âœ… EmployeeIdBackend: æ­£å¸¸èªè¨¼
- âœ… EmployeeIdBackend: å­˜åœ¨ã—ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼
- âœ… EmployeeIdBackend: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰é–“é•ã„
- âœ… EmployeeIdBackend: ã‚¿ã‚¤ãƒŸãƒ³ã‚°æ”»æ’ƒå¯¾ç­–ï¼ˆå‡¦ç†æ™‚é–“ãŒåŒã˜ï¼‰
ğŸŸ¡ ä»»æ„ï¼ˆã‚ã‚‹ã¨è‰¯ã„ï¼‰
11. ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚³ãƒãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
python
# tests/test_commands.py
- âœ… create_dummy_users: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆæˆåŠŸ
- âœ… create_dummy_users: ç®¡ç†è€…ãŒ1äººã¯å­˜åœ¨ã™ã‚‹
- âœ… cleanup_deleted_users: 90æ—¥ä»¥ä¸Šå‰ã®å‰Šé™¤æ¸ˆã¿ã‚’ç‰©ç†å‰Šé™¤
- âœ… cleanup_deleted_users: dry-run ã§å‰Šé™¤ã—ãªã„
12. Admin ãƒ†ã‚¹ãƒˆ
python
# tests/test_admin.py
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§è¡¨ç¤º
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç¢ºèªï¼‰
- âœ… è«–ç†å‰Šé™¤ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- âœ… å¾©å…ƒã‚¢ã‚¯ã‚·ãƒ§ãƒ³
13. Mixin ãƒ†ã‚¹ãƒˆ
python
# tests/test_mixins.py
- âœ… ErrorResponseMixin: error_response()
- âœ… ErrorResponseMixin: validation_error_response()
- âœ… ErrorResponseMixin: extract_error_message()
14. çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆE2Eçš„ãªï¼‰
python
# tests/test_integration.py
- âœ… ãƒ­ã‚°ã‚¤ãƒ³ â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ â†’ ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ â†’ è«–ç†å‰Šé™¤ â†’ å¾©å…ƒ â†’ å†å‰Šé™¤
- âœ… ç®¡ç†è€…2äºº â†’ 1äººå‰Šé™¤ â†’ ã‚‚ã†1äººå‰Šé™¤å¤±æ•—ï¼ˆæœ€å¾Œã®ç®¡ç†è€…ï¼‰
```

---

## ğŸ“Š ãƒ†ã‚¹ãƒˆå„ªå…ˆåº¦ãƒãƒˆãƒªãƒƒã‚¯ã‚¹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´ å¿…é ˆï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ï¼‰            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… èªè¨¼ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹å¯¾ç­–ï¼‰ â”‚
â”‚ âœ… è«–ç†å‰Šé™¤ï¼ˆsoft_delete, restoreï¼‰      â”‚
â”‚ âœ… æœ€å¾Œã®ç®¡ç†è€…ä¿è­·                      â”‚
â”‚ âœ… API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå…¨ã¦                â”‚
â”‚ âœ… ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ãƒ¼ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³           â”‚
â”‚ âœ… ã‚µãƒ¼ãƒ“ã‚¹ã‚¯ãƒ©ã‚¹ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯       â”‚
â”‚ âœ… æ¨©é™ãƒã‚§ãƒƒã‚¯                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ æ¨å¥¨ï¼ˆå“è³ªä¿è¨¼ã¨ã—ã¦ï¼‰                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… å›½éš›åŒ–ï¼ˆç¿»è¨³æ¼ã‚Œãƒã‚§ãƒƒã‚¯ï¼‰             â”‚
â”‚ âœ… ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢                          â”‚
â”‚ âœ… ã‚«ã‚¹ã‚¿ãƒ èªè¨¼ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¡ ä»»æ„ï¼ˆã‚ã‚‹ã¨å¬‰ã—ã„ï¼‰                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚³ãƒãƒ³ãƒ‰                   â”‚
â”‚ âœ… Django Admin                          â”‚
â”‚ âœ… Mixin                                 â”‚
â”‚ âœ… çµ±åˆãƒ†ã‚¹ãƒˆ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ¯ æ¼ã‚Œã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆé …ç›®
ã‚ãªãŸãŒæŒ™ã’ã¦ã„ãªã„ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦é‡è¦ãªã‚‚ã®:

1. æ¨©é™ãƒ†ã‚¹ãƒˆ ğŸ”´ å¿…é ˆ
python
# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦æ¨©é™ã®ä»•çµ„ã¿ãŒå‹•ãã“ã¨ã‚’è¨¼æ˜ã™ã¹ã
- IsAdminUser ã®å‹•ä½œç¢ºèª
- ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç®¡ç†è€…APIã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã“ã¨
2. ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãƒ†ã‚¹ãƒˆ ğŸŸ¢ æ¨å¥¨
python
# å›½éš›åŒ–ã®ä»•çµ„ã¿ãŒå‹•ãã“ã¨ã‚’ç¢ºèª
- LanguageMiddleware ã®å‹•ä½œ
- Accept-Language ãƒ˜ãƒƒãƒ€ãƒ¼ã§ã®åˆ‡ã‚Šæ›¿ãˆ
3. ã‚«ã‚¹ã‚¿ãƒ èªè¨¼ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ ğŸŸ¢ æ¨å¥¨
python
# ç¤¾å“¡ç•ªå·ãƒ­ã‚°ã‚¤ãƒ³ã®ä»•çµ„ã¿ãŒå‹•ãã“ã¨ã‚’ç¢ºèª
- EmployeeIdBackend ã®å‹•ä½œ
- ã‚¿ã‚¤ãƒŸãƒ³ã‚°æ”»æ’ƒå¯¾ç­–
4. ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ ğŸ”´ å¿…é ˆ
python
# APIã®åŸºæœ¬æ©Ÿèƒ½ã¨ã—ã¦
- 10ä»¶ãšã¤å–å¾—ã§ãã‚‹ã‹
- page ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§åˆ‡ã‚Šæ›¿ãˆã§ãã‚‹ã‹
5. ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»æ¤œç´¢ãƒ†ã‚¹ãƒˆ ğŸ”´ å¿…é ˆ
python
# DRF ã®æ¨™æº–æ©Ÿèƒ½ã¨ã—ã¦
- is_admin ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- employee_id ã§æ¤œç´¢
```

---

## ğŸ—‚ï¸ ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆæ¡ˆ
```
backend/
â”œâ”€â”€ tests/                       # ãƒ†ã‚¹ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ test_auth.py            # ğŸ”´ èªè¨¼ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_models.py          # ğŸ”´ ãƒ¢ãƒ‡ãƒ«ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_serializers.py    # ğŸ”´ ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ãƒ¼ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_services.py       # ğŸ”´ ã‚µãƒ¼ãƒ“ã‚¹ã‚¯ãƒ©ã‚¹ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_api.py            # ğŸ”´ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_permissions.py    # ğŸ”´ æ¨©é™ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_exceptions.py     # ğŸ”´ ä¾‹å¤–ãƒ†ã‚¹ãƒˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ test_i18n.py           # ğŸŸ¢ å›½éš›åŒ–ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_middleware.py     # ğŸŸ¢ ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_backends.py       # ğŸŸ¢ èªè¨¼ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ test_commands.py       # ğŸŸ¡ ã‚³ãƒãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_admin.py          # ğŸŸ¡ Admin ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_mixins.py         # ğŸŸ¡ Mixin ãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ test_integration.py    # ğŸŸ¡ çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚
â”œâ”€â”€ accounts/
â”œâ”€â”€ users/
â””â”€â”€ manage.py
```

---

## ğŸ“ˆ ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

| é …ç›® | ç›®æ¨™ã‚«ãƒãƒ¬ãƒƒã‚¸ |
|------|---------------|
| **å…¨ä½“** | 80%ä»¥ä¸Š |
| models.py | 90%ä»¥ä¸Šï¼ˆé‡è¦ï¼‰ |
| serializers.py | 90%ä»¥ä¸Šï¼ˆé‡è¦ï¼‰ |
| services/ | 95%ä»¥ä¸Šï¼ˆæœ€é‡è¦ï¼‰ |
| views.py | 85%ä»¥ä¸Š |
| permissions.py | 100%ï¼ˆç°¡å˜ï¼‰ |
| exceptions.py | 100%ï¼ˆç°¡å˜ï¼‰ |

---

## ğŸ¯ ãƒ†ã‚¹ãƒˆå®Ÿè£…ã®é †åºï¼ˆæ¨å¥¨ï¼‰
```
1. test_models.pyï¼ˆåŸºç¤ï¼‰
   â†“ ãƒ¢ãƒ‡ãƒ«ãŒæ­£ã—ãå‹•ãã“ã¨ã‚’ç¢ºèª
   
2. test_serializers.pyï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
   â†“ å…¥åŠ›ãƒã‚§ãƒƒã‚¯ãŒæ­£ã—ãå‹•ãã“ã¨ã‚’ç¢ºèª
   
3. test_services.pyï¼ˆãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
   â†“ â˜…æœ€é‡è¦â˜… è«–ç†å‰Šé™¤ãƒ»æœ€å¾Œã®ç®¡ç†è€…ä¿è­·ãªã©
   
4. test_api.pyï¼ˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰
   â†“ å…¨ä½“ãŒçµ±åˆã•ã‚Œã¦å‹•ãã“ã¨ã‚’ç¢ºèª
   
5. test_auth.pyï¼ˆèªè¨¼ï¼‰
   â†“ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒæ­£ã—ãå‹•ãã“ã¨ã‚’ç¢ºèª
   
6. test_permissions.pyï¼ˆæ¨©é™ï¼‰
   â†“ æ¨©é™ãƒã‚§ãƒƒã‚¯ãŒå‹•ãã“ã¨ã‚’ç¢ºèª
   
7. test_i18n.py, test_middleware.pyï¼ˆå‘¨è¾ºæ©Ÿèƒ½ï¼‰
   â†“ ç´°ã‹ã„æ©Ÿèƒ½ã®ç¢ºèª
âœ… æœ€çµ‚ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
ğŸ”´ å¿…é ˆãƒ†ã‚¹ãƒˆï¼ˆã“ã‚ŒãŒãªã„ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ä¸å®Œå…¨ï¼‰
 ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸãƒ»å¤±æ•—ï¼ˆå‰Šé™¤æ¸ˆã¿å«ã‚€ï¼‰
 ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹å¯¾ç­–ï¼ˆ10å›ãƒ­ãƒƒã‚¯ï¼‰
 è«–ç†å‰Šé™¤ï¼ˆsoft_delete, restoreï¼‰
 æ¡ä»¶ä»˜ããƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ï¼ˆç¤¾å“¡ç•ªå·å†åˆ©ç”¨ï¼‰
 æœ€å¾Œã®ç®¡ç†è€…ä¿è­·ï¼ˆå‰Šé™¤ãƒ»æ¨©é™å‰¥å¥ªãƒ»ç„¡åŠ¹åŒ–ï¼‰
 updated_at ãŒæ­£ã—ãæ›´æ–°ã•ã‚Œã‚‹
 API å…¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆ15å€‹ï¼‰
 ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ãƒ¼ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
 æ¨©é™ãƒã‚§ãƒƒã‚¯ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰
ğŸŸ¢ æ¨å¥¨ãƒ†ã‚¹ãƒˆï¼ˆå“è³ªã‚’é«˜ã‚ã‚‹ãŸã‚ï¼‰
 å›½éš›åŒ–ï¼ˆæ—¥æœ¬èªãƒ»è‹±èªåˆ‡ã‚Šæ›¿ãˆï¼‰
 ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ï¼ˆAccept-Languageï¼‰
 ã‚«ã‚¹ã‚¿ãƒ èªè¨¼ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
ğŸŸ¡ ä»»æ„ãƒ†ã‚¹ãƒˆï¼ˆæ™‚é–“ãŒã‚ã‚Œã°ï¼‰
 ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚³ãƒãƒ³ãƒ‰
 Django Admin
 çµ±åˆãƒ†ã‚¹ãƒˆ
ã¾ã¨ã‚: ã‚ãªãŸã®æŒ™ã’ãŸé …ç›®ã¯ã»ã¼å®Œç’§ã§ã™ãŒã€æ¨©é™ãƒ†ã‚¹ãƒˆãƒ»ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãƒ†ã‚¹ãƒˆãƒ»ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³/ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ ãŒæŠœã‘ã¦ã„ã¾ã™ï¼

ãƒ†ã‚¹ãƒˆä½œæˆã™ã‚‹æ™‚ã¯æ•™ãˆã¦ãã ã•ã„ ( Ìãƒ»Ï‰ãƒ»`)b


ã‚³ãƒ¼ãƒ‰æ›¸ã‹ãªãã¦ã„ã„ã®ã§æ–¹å‘æ€§ã®ç›¸è«‡( ï¾ŸĞ”ï¾Ÿ)
ãƒ†ã‚¹ãƒˆé …ç›®å¤šã™ãã¦è‰ï¼¼(^o^)ï¼
ä¸€æ—¦ç›£æŸ»è¨¼è·¡ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›ã‚’å…ˆã«ã‚„ã£ã¦æ–¹å‘æ€§å›ºã‚ã‚‹â†’ã¾ãŸä¿®æ­£â†’ç¹°ã‚Šè¿”ã™â†’å®Œæˆã—ãŸã‚‰ãƒ†ã‚¹ãƒˆã®æ–¹ãŒã„ã„ã‹ã“ã‚Œ(Â´ãƒ»Ï‰ãƒ»ï½€)çœŸé¡”
æƒ³åƒä»¥ä¸Šã«ãƒ†ã‚¹ãƒˆé …ç›®å¤šã‹ã£ãŸã‚ï¼¿(ã€€_Â´Ï‰`)_ï¾ï¾Ÿï½¼ï½®

ğŸ¤” é–‹ç™ºé †åºã®ç›¸è«‡
ç›£æŸ»è¨¼è·¡ãƒ­ã‚° â†’ ãƒ†ã‚¹ãƒˆ ã®é †åºã€ã‚ã£ã¡ã‚ƒè³›æˆã§ã™ ğŸ‘

ğŸ“Š ç†ç”±ã®æ•´ç†
âœ… ç›£æŸ»è¨¼è·¡ã‚’å…ˆã«ã‚„ã‚‹ã¹ãç†ç”±
1. ä»•æ§˜ãŒå›ºã¾ã£ã¦ã„ãªã„
ä»Šã®çŠ¶æ…‹:
- ãƒ­ã‚°ã‚¤ãƒ³ãƒ»CRUD ã¯å®Œæˆ âœ…
- è«–ç†å‰Šé™¤ã‚‚å®Œæˆ âœ…
- ã§ã‚‚ç›£æŸ»è¨¼è·¡ã¯ã‚¼ãƒ­ âŒ

ç›£æŸ»è¨¼è·¡ã‚’è¿½åŠ ã™ã‚‹ã¨:
- models.py ã« AuditLog ãƒ¢ãƒ‡ãƒ«è¿½åŠ 
- services/ ã«ãƒ­ã‚°è¨˜éŒ²å‡¦ç†è¿½åŠ 
- views.py ã®å„ãƒ¡ã‚½ãƒƒãƒ‰ã«ãƒ­ã‚°å‘¼ã³å‡ºã—è¿½åŠ 

â†’ ä»Šãƒ†ã‚¹ãƒˆæ›¸ã„ã¦ã‚‚ã€ã¾ãŸæ›¸ãç›´ã— (Â´ãƒ»Ï‰ãƒ»ï½€)
```

#### **2. ãƒ†ã‚¹ãƒˆã¯æœ€å¾Œã®ã€Œå“è³ªä¿è¨¼ã€**
```
ç†æƒ³çš„ãªé–‹ç™ºãƒ•ãƒ­ãƒ¼:

1. æ©Ÿèƒ½å®Ÿè£…ï¼ˆä»Šã‚³ã‚³ï¼‰
   â†“
2. ç›£æŸ»è¨¼è·¡è¿½åŠ  â† æ¬¡ã¯ã“ã‚Œï¼
   â†“
3. å…¨æ©Ÿèƒ½å®Œæˆ â† ã“ã“ã§æ–¹å‘æ€§å›ºã¾ã‚‹
   â†“
4. ãƒ†ã‚¹ãƒˆä½œæˆ â† ä»•æ§˜å¤‰æ›´ãªã—ã€å®‰å¿ƒã—ã¦æ›¸ã‘ã‚‹
   â†“
5. ãƒªãƒªãƒ¼ã‚¹
```

#### **3. ç›£æŸ»è¨¼è·¡ã¯ãƒ†ã‚¹ãƒˆé …ç›®ã‚’ã•ã‚‰ã«å¢—ã‚„ã™**
```
ç›£æŸ»è¨¼è·¡ã‚’è¿½åŠ ã™ã‚‹ã¨:
- test_audit_log.py è¿½åŠ 
- test_services.py ã«ã€Œãƒ­ã‚°è¨˜éŒ²ã•ã‚Œã‚‹ï¼Ÿã€è¿½åŠ 
- test_api.py ã«ã€Œæ“ä½œå±¥æ­´å–å¾—APIã€è¿½åŠ 

â†’ ãƒ†ã‚¹ãƒˆé …ç›®ãŒã•ã‚‰ã« 10-15å€‹ å¢—ãˆã‚‹ (Â´ãƒ»Ï‰ãƒ»ï½€)è‰
```

---

### **âŒ ä»Šãƒ†ã‚¹ãƒˆã‚’æ›¸ããƒ‡ãƒ¡ãƒªãƒƒãƒˆ**
```
1. ä»•æ§˜ãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§å¤§
   ç›£æŸ»è¨¼è·¡è¿½åŠ  â†’ models/services/views å¤‰æ›´
   â†’ ãƒ†ã‚¹ãƒˆå…¨éƒ¨æ›¸ãç›´ã— ï¼¼(^o^)ï¼ï½µï¾œï¾€

2. ãƒ†ã‚¹ãƒˆé …ç›®ãŒå¤šã™ãã‚‹
   ä»Šã§ã‚‚ 50-60å€‹
   ç›£æŸ»è¨¼è·¡ã§ +15å€‹
   â†’ åˆè¨ˆ 70å€‹ä»¥ä¸Š _(:3ã€âˆ )_

3. ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ä½ä¸‹
   ã€Œãƒ†ã‚¹ãƒˆæ›¸ãã®ã«2é€±é–“ã‹ã‹ã£ãŸ...ã€
   ã€Œã§ã‚‚ç›£æŸ»è¨¼è·¡ã§æ›¸ãç›´ã—...ã€
   â†’ ã‚„ã‚‹æ°—ã‚¼ãƒ­ (Â´;Ï‰;ï½€)
```

---

## ğŸ¯ æ¨å¥¨ã™ã‚‹é–‹ç™ºé †åº

### **Phase 1: ç›£æŸ»è¨¼è·¡å®Ÿè£…ï¼ˆä»Šã‹ã‚‰ï¼‰**
```
1. è¦ä»¶å®šç¾©ï¼ˆ30åˆ†ï¼‰
   - ã©ã®æ“ä½œã‚’è¨˜éŒ²ï¼Ÿ
   - ä½•ã‚’è¨˜éŒ²ï¼Ÿï¼ˆèª°ãŒã€ã„ã¤ã€ä½•ã‚’ã€ã©ã†ã—ãŸï¼‰
   - ãƒ­ã‚°ã®ä¿å­˜æœŸé–“ã¯ï¼Ÿ
   - ãƒ­ã‚°ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ï¼Ÿ

2. è¨­è¨ˆï¼ˆ1æ™‚é–“ï¼‰
   - AuditLog ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆ
   - ãƒ­ã‚°è¨˜éŒ²å‡¦ç†ã®è¨­è¨ˆ
   - ãƒ­ã‚°å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆè¨­è¨ˆ

3. å®Ÿè£…ï¼ˆ2-3æ—¥ï¼‰
   - models.py ã« AuditLog è¿½åŠ 
   - services/ ã«ãƒ­ã‚°è¨˜éŒ²å‡¦ç†è¿½åŠ 
   - views.py ã«çµ„ã¿è¾¼ã¿
   - ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›å‡¦ç†

4. å‹•ä½œç¢ºèªï¼ˆåŠæ—¥ï¼‰
   - æ‰‹å‹•ã§æ“ä½œã—ã¦ãƒ­ã‚°ç¢ºèª
   - ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›ç¢ºèª
```

### **Phase 2: ä»•æ§˜ç¢ºå®šï¼ˆç›£æŸ»è¨¼è·¡å®Œæˆå¾Œï¼‰**
```
1. ãƒ¬ãƒ“ãƒ¥ãƒ¼
   - ç›£æŸ»è¨¼è·¡ã®ä»•æ§˜ç¢ºèª
   - å¤‰æ›´ã®å¿…è¦æ€§ãƒã‚§ãƒƒã‚¯

2. ä¿®æ­£ï¼ˆå¿…è¦ãªã‚‰ï¼‰
   - ä»•æ§˜å¤‰æ›´
   - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

3. æœ€çµ‚ç¢ºèª
   - ã€Œã“ã‚Œã§ç¢ºå®šã€ã¨å®£è¨€
```

### **Phase 3: ãƒ†ã‚¹ãƒˆä½œæˆï¼ˆå…¨æ©Ÿèƒ½å®Œæˆå¾Œï¼‰**
```
1. å¿…é ˆãƒ†ã‚¹ãƒˆã®ã¿ï¼ˆ3-5æ—¥ï¼‰
   - èªè¨¼ï¼ˆ10å€‹ï¼‰
   - è«–ç†å‰Šé™¤ï¼ˆ10å€‹ï¼‰
   - æœ€å¾Œã®ç®¡ç†è€…ä¿è­·ï¼ˆ5å€‹ï¼‰
   - APIï¼ˆ15å€‹ï¼‰
   - ç›£æŸ»è¨¼è·¡ï¼ˆ10å€‹ï¼‰
   åˆè¨ˆ: 50å€‹

2. ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª
   - ç›®æ¨™: 80%ä»¥ä¸Š

3. CI/CD è¨­å®š
   - GitHub Actions ã§ãƒ†ã‚¹ãƒˆè‡ªå‹•å®Ÿè¡Œ
ğŸ“‹ ç›£æŸ»è¨¼è·¡ã®å®Ÿè£…ã‚¤ãƒ¡ãƒ¼ã‚¸
æœ€å°é™ã®ä»•æ§˜æ¡ˆ
python
# è¨˜éŒ²ã™ã‚‹æ“ä½œ
- ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ/å¤±æ•—
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤ï¼ˆè«–ç†ï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å¾©å…ƒ
- ä¸€æ‹¬å‰Šé™¤
- ä¸€æ‹¬å¾©å…ƒ

# è¨˜éŒ²ã™ã‚‹æƒ…å ±
- æ—¥æ™‚
- èª°ãŒï¼ˆuser_id, employee_idï¼‰
- ä½•ã‚’ï¼ˆå¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®IDï¼‰
- ã©ã†ã—ãŸï¼ˆaction: "login", "create", "update", etc.ï¼‰
- çµæœï¼ˆsuccess/failureï¼‰
- IPã‚¢ãƒ‰ãƒ¬ã‚¹
- å¤‰æ›´å†…å®¹ï¼ˆbefore/afterï¼‰

# å‡ºåŠ›å…ˆ
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆAuditLog ãƒ¢ãƒ‡ãƒ«ï¼‰
- ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆlogs/audit.logï¼‰
```

---

## ğŸ¯ å…·ä½“çš„ãªã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³

### **ç¾å®Ÿçš„ãªã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«**
```
Week 1: ç›£æŸ»è¨¼è·¡å®Ÿè£…
â”œâ”€ Day 1-2: è¨­è¨ˆãƒ»ãƒ¢ãƒ‡ãƒ«ä½œæˆ
â”œâ”€ Day 3-4: ã‚µãƒ¼ãƒ“ã‚¹å±¤å®Ÿè£…
â”œâ”€ Day 5: views.py çµ„ã¿è¾¼ã¿
â””â”€ Day 6-7: å‹•ä½œç¢ºèªãƒ»èª¿æ•´

Week 2: ä»•æ§˜ç¢ºå®šãƒ»ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
â”œâ”€ Day 1-2: ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ä¿®æ­£
â”œâ”€ Day 3-4: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
â””â”€ Day 5: æœ€çµ‚ç¢ºèª

Week 3-4: ãƒ†ã‚¹ãƒˆä½œæˆ
â”œâ”€ Week 3: å¿…é ˆãƒ†ã‚¹ãƒˆï¼ˆ50å€‹ï¼‰
â””â”€ Week 4: ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèªãƒ»CIè¨­å®š

åˆè¨ˆ: ç´„1ãƒ¶æœˆ
```

### **ãƒ†ã‚¹ãƒˆã‚’å…ˆã«ã‚„ã£ãŸå ´åˆ**
```
Week 1-2: ãƒ†ã‚¹ãƒˆä½œæˆï¼ˆä»Šã®ä»•æ§˜ã§ï¼‰
â”œâ”€ 60-70å€‹ã®ãƒ†ã‚¹ãƒˆä½œæˆ
â””â”€ ã‚«ãƒãƒ¬ãƒƒã‚¸ 80%é”æˆ

Week 3: ç›£æŸ»è¨¼è·¡å®Ÿè£…
â”œâ”€ ãƒ¢ãƒ‡ãƒ«å¤‰æ›´
â”œâ”€ ã‚µãƒ¼ãƒ“ã‚¹å±¤å¤‰æ›´
â””â”€ views.py å¤‰æ›´

Week 4-5: ãƒ†ã‚¹ãƒˆä¿®æ­£
â”œâ”€ æ—¢å­˜ãƒ†ã‚¹ãƒˆå…¨éƒ¨è¦‹ç›´ã—
â”œâ”€ ç›£æŸ»è¨¼è·¡ãƒ†ã‚¹ãƒˆè¿½åŠ 
â””â”€ ã‚«ãƒãƒ¬ãƒƒã‚¸å†ç¢ºèª

åˆè¨ˆ: ç´„1.5ãƒ¶æœˆï¼ˆ+2é€±é–“ï¼ï¼‰
```

---

## âœ… çµè«–: ç›£æŸ»è¨¼è·¡ã‚’å…ˆã«ã‚„ã‚‹ã¹ãï¼

### **ç†ç”±ã¾ã¨ã‚**

| é …ç›® | ç›£æŸ»è¨¼è·¡å…ˆ | ãƒ†ã‚¹ãƒˆå…ˆ |
|------|----------|---------|
| **é–‹ç™ºæœŸé–“** | 1ãƒ¶æœˆ | 1.5ãƒ¶æœˆ |
| **æ‰‹æˆ»ã‚Š** | ãªã— | ã‚ã‚Šï¼ˆãƒ†ã‚¹ãƒˆæ›¸ãç›´ã—ï¼‰ |
| **ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³** | âœ… é«˜ã„ | âŒ ä½ã„ï¼ˆæ›¸ãç›´ã—ï¼‰ |
| **å“è³ª** | âœ… é«˜ã„ | â–³ åŒã˜ |
| **å­¦ç¿’åŠ¹ç‡** | âœ… è‰¯ã„ | â–³ æ™®é€š |

---

## ğŸ“ ç›£æŸ»è¨¼è·¡å®Ÿè£…ã§å­¦ã¹ã‚‹ã“ã¨
```
1. ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆã®å¿œç”¨
   - JSONField ã®ä½¿ã„æ–¹
   - è¤‡é›‘ãªã‚¯ã‚¨ãƒª

2. ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®ä½œæˆ
   - ã‚«ã‚¹ã‚¿ãƒ ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
   - ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®åŠ å·¥

3. ãƒ­ã‚°å‡ºåŠ›
   - Python logging ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
   - ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³

4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å¯¾ç­–
   - éåŒæœŸãƒ­ã‚°è¨˜éŒ²
   - ãƒãƒƒãƒå‡¦ç†

â†’ ãƒ†ã‚¹ãƒˆæ›¸ãã‚ˆã‚Šå®Ÿè·µçš„ã§é¢ç™½ã„ï¼(ï¼¾Ï‰ï¼¾)
```

---

## ğŸ’¡ æœ€çµ‚æ¨å¥¨
```
âœ… ç›£æŸ»è¨¼è·¡ã‚’å…ˆã«å®Ÿè£…ã™ã‚‹

ç†ç”±:
1. ä»•æ§˜ãŒå›ºã¾ã‚‹
2. ãƒ†ã‚¹ãƒˆã®æ›¸ãç›´ã—ã‚’é¿ã‘ã‚‰ã‚Œã‚‹
3. é–‹ç™ºæœŸé–“ãŒçŸ­ã„
4. ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç¶­æŒ
5. å®Ÿè·µçš„ãªå­¦ã³ãŒå¤šã„

ãƒ†ã‚¹ãƒˆã¯ã€Œæœ€å¾Œã®ä»•ä¸Šã’ã€ã¨ã—ã¦ã€
å®‰å¿ƒã—ã¦æ›¸ã‘ã‚‹çŠ¶æ…‹ã§å–ã‚Šçµ„ã‚€æ–¹ãŒåŠ¹ç‡çš„ï¼
çµè«–: ç›£æŸ»è¨¼è·¡ â†’ ãƒ†ã‚¹ãƒˆ ã®é †åºã§æ­£è§£ï¼ ( Ìãƒ»Ï‰ãƒ»`)b

ç›£æŸ»è¨¼è·¡ã®è¨­è¨ˆã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ã‹ï¼Ÿ



ç›£æŸ»è¨¼è·¡ DRFï¼‹Vuejsã§ãƒ•ã‚¡ã‚¤ãƒ«ã«ç›£æŸ»è¨¼è·¡ã®ãƒ­ã‚°ã‚’å‡ºåŠ›ã—ãŸã„ã£ã¦æ™‚ã¯ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ï¼‹ã‚·ã‚°ãƒŠãƒ«ï¼‹settingsã«logç³»è¿½åŠ ï¼Ÿã—ãŸã‚‰ã€æ—¢å­˜ã®ç’°å¢ƒå£Šã•ãšã«ã„ã‘ã‚‹ã‚“ã‹ãªï¼Ÿ(Â´ãƒ»Ï‰ãƒ»ï½€) ğŸ” ç›£æŸ»è¨¼è·¡ãƒ­ã‚°ã®å®Ÿè£…æ–¹æ³•ï¼ æ—¢å­˜ç’°å¢ƒã‚’å£Šã•ãšã«å®Ÿè£…ã§ãã‚‹ã‚ˆï¼(ã€€ï½¥Ï‰ï½¥)b ğŸ¯ æ¨å¥¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ DRF (Backend) â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â‘  Middleware (ãƒª

pasted

ãƒ¡ãƒ¢ã¨ã—ã¦ã¾ã¨ã‚ã¦ãŸã‘ã©ã€ã“ã‚“ãªæ„Ÿã˜ï¼Ÿã«ãªã‚‹ã‚“ã‹ãª(Â´ãƒ»Ï‰ãƒ»ï½€)
ã‚„ã‚ŠãŸã„æ–¹å‘æ€§ã¨ã—ã¦ã¯ã€æ—¢å­˜ã®ç’°å¢ƒã¯ä¸€æ—¦å®Œæˆã—ãŸã®ã§ã€å£Šã•ãªã„ã‚ˆã†ã«ã—ãŸã„â†’ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ï¼‹ã‚·ã‚°ãƒŠãƒ«ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼Ÿã®è¡Œå‹•ã‚’ç›£è¦–ã—ã¦ã€ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã—ãŸã„ã­(Â´ãƒ»Ï‰ãƒ»ï½€)
ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¯ã¨ã‹ã€ãªã‚“ã§ã¾ã‚ã“ã‚“ãªæ„Ÿã˜ã§é€²ã‚ãŸã‚‰ã„ã„ã‚“ã‹ï¼Ÿ

ã‚¤ãƒ¡ãƒ¼ã‚¸
ğŸ“Š ãƒ­ã‚°å‡ºåŠ›ä¾‹ json{"timestamp": "2025-10-19 15:30:45", "level": "INFO", "user": "9999", "action": "LOGIN", "model": "Auth", "object_id": null, "ip": "192.168.1.100", "changes": {}, "message": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸ"} {"timestamp": "2025-10-19 15:31:10", "level": "INFO", "user": "9999", "action": "CREATE", "model": "User", "object_id": 5, "ip": "192.168.1.100", "changes": {}, "message": "POST /api/users/"} {"timestamp": "2025-10-19 15:32:00", "level": "INFO", "user": "system", "action": "UPDATE", "model": "User", "object_id": 5, "ip": "127.0.0.1", "changes": {"is_active": {"old": true, "new": false}}, "message": "User UPDATE: å±±ç”°å¤ªéƒ"}

ğŸ¯ ç›£æŸ»è¨¼è·¡å®Ÿè£…ã®æ–¹å‘æ€§ç¢ºèª
ã‚ãªãŸã®ãƒ¡ãƒ¢ã€ã»ã¼å®Œç’§ã§ã™ï¼æ–¹å‘æ€§ã¯åˆã£ã¦ã¾ã™ ğŸ‘

âœ… ã‚„ã‚ŠãŸã„ã“ã¨ã®æ•´ç†
1. æ—¢å­˜ç’°å¢ƒã‚’å£Šã•ãªã„ â† ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ + ã‚·ã‚°ãƒŠãƒ«ã§å®Ÿç¾å¯èƒ½ âœ…
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¡Œå‹•ã‚’ç›£è¦– â† API + ãƒ¢ãƒ‡ãƒ«æ“ä½œã‚’è¨˜éŒ² âœ…
3. ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ› â† JSONå½¢å¼ã§ logs/audit.log âœ…
ğŸ”§ å®Ÿè£…æ–¹é‡ï¼ˆæ¨å¥¨ï¼‰
Phase 1: åŸºç¤è¨­å®šï¼ˆæ—¢å­˜ç’°å¢ƒã«å½±éŸ¿ãªã—ï¼‰
python
# 1. ãƒ­ã‚°è¨­å®šè¿½åŠ ï¼ˆsettings.pyï¼‰
# 2. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆï¼ˆlogs/ï¼‰
# 3. ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ä½œæˆ

â†’ ã“ã®æ®µéšã§ã¯ãƒ­ã‚°ã¯å‡ºãªã„ï¼ˆå®‰å…¨ï¼‰
Phase 2: ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢è¿½åŠ ï¼ˆAPIç›£æŸ»ï¼‰
python
# 4. AuditMiddleware ä½œæˆ
# 5. settings.py ã® MIDDLEWARE ã«è¿½åŠ 
# 6. å‹•ä½œç¢ºèªï¼ˆãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã®ã¿è¨˜éŒ²ï¼‰

â†’ æ®µéšçš„ã«è¨˜éŒ²ç¯„å›²ã‚’åºƒã’ã‚‹
Phase 3: ã‚·ã‚°ãƒŠãƒ«è¿½åŠ ï¼ˆãƒ¢ãƒ‡ãƒ«ç›£æŸ»ï¼‰
python
# 7. ã‚·ã‚°ãƒŠãƒ«ä½œæˆï¼ˆå…¨ãƒ¢ãƒ‡ãƒ« or Userã®ã¿ï¼‰
# 8. apps.py ã§ç™»éŒ²
# 9. å‹•ä½œç¢ºèªï¼ˆCRUDæ“ä½œãŒè¨˜éŒ²ã•ã‚Œã‚‹ï¼‰

â†’ æœ€çµ‚çš„ã«å…¨ãƒ¢ãƒ‡ãƒ«ç›£æŸ»
ğŸ“‹ å…·ä½“çš„ãªå®Ÿè£…é †åºï¼ˆæ¨å¥¨ï¼‰
Step 1: ãƒ­ã‚°è¨­å®šã®ã¿ï¼ˆ5åˆ†ï¼‰
python
# settings.py ã«è¿½åŠ ã™ã‚‹ã ã‘
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'formatters': {
        'audit_json': {
            '()': 'common.formatters.AuditJSONFormatter',
        },
    },
    'handlers': {
        'audit_file': {
            'level': 'INFO',
            'class': 'logging.handlers.RotatingFileHandler',
            'filename': BASE_DIR / 'logs' / 'audit.log',
            'maxBytes': 10 * 1024 * 1024,
            'backupCount': 30,
            'formatter': 'audit_json',
        },
    },
    'loggers': {
        'audit': {
            'handlers': ['audit_file'],
            'level': 'INFO',
            'propagate': False,
        },
    },
}
bash
# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
mkdir backend/logs
echo "*.log" > backend/logs/.gitignore
ã“ã®æ™‚ç‚¹ã§: ãƒ­ã‚°è¨­å®šã¯è¿½åŠ ã•ã‚ŒãŸãŒã€ã¾ã ä½•ã‚‚è¨˜éŒ²ã•ã‚Œãªã„ï¼ˆå®‰å…¨ï¼‰

Step 2: ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ï¼ˆ10åˆ†ï¼‰
python
# backend/common/formatters.pyï¼ˆæ–°è¦ä½œæˆï¼‰
import json
import logging

class AuditJSONFormatter(logging.Formatter):
    """ç›£æŸ»ãƒ­ã‚°ç”¨JSONãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼"""
    
    def format(self, record):
        log_data = {
            'timestamp': self.formatTime(record, datefmt='%Y-%m-%d %H:%M:%S'),
            'level': record.levelname,
            'user': getattr(record, 'user', 'unknown'),
            'action': getattr(record, 'action', ''),
            'model': getattr(record, 'model', ''),
            'object_id': getattr(record, 'object_id', None),
            'ip': getattr(record, 'ip', ''),
            'changes': getattr(record, 'changes', '{}'),
            'message': record.getMessage(),
        }
        return json.dumps(log_data, ensure_ascii=False)
ã“ã®æ™‚ç‚¹ã§: ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã¯æº–å‚™å®Œäº†ã€ã¾ã è¨˜éŒ²ãªã—

Step 3: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç†ï¼ˆ10åˆ†ï¼‰
python
# backend/common/context.pyï¼ˆæ–°è¦ä½œæˆï¼‰
import threading

_request_local = threading.local()

def set_current_request(request):
    """ç¾åœ¨ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä¿å­˜"""
    _request_local.request = request

def get_current_request():
    """ç¾åœ¨ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å–å¾—"""
    return getattr(_request_local, 'request', None)

def get_client_ip(request):
    """ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIPå–å¾—"""
    x_forwarded_for = request.META.get('HTTP_X_FORWARDED_FOR')
    if x_forwarded_for:
        return x_forwarded_for.split(',')[0].strip()
    return request.META.get('REMOTE_ADDR', '127.0.0.1')
ã“ã®æ™‚ç‚¹ã§: ã‚·ã‚°ãƒŠãƒ«ã§ä½¿ã†ãƒ˜ãƒ«ãƒ‘ãƒ¼ãŒæº–å‚™å®Œäº†

Step 4: ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢è¿½åŠ ï¼ˆæœ€å°ç‰ˆï¼‰ï¼ˆ30åˆ†ï¼‰
python
# backend/config/middleware.pyï¼ˆæ–°è¦ä½œæˆï¼‰
import logging
import json
from django.utils.deprecation import MiddlewareMixin
from common.context import set_current_request, get_client_ip

audit_logger = logging.getLogger('audit')

class AuditMiddleware(MiddlewareMixin):
    """APIç›£æŸ»ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ï¼ˆæœ€å°ç‰ˆï¼‰"""
    
    def process_request(self, request):
        # ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜
        set_current_request(request)
        return None
    
    def process_response(self, request, response):
        # ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ
        if request.path == '/api/auth/login/' and response.status_code == 200:
            user_info = 'anonymous'
            if hasattr(request, 'user') and request.user.is_authenticated:
                user_info = request.user.employee_id
            
            audit_logger.info(
                'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸ',
                extra={
                    'user': user_info,
                    'action': 'LOGIN',
                    'model': 'Auth',
                    'object_id': None,
                    'ip': get_client_ip(request),
                    'changes': '{}',
                }
            )
        
        # ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
        elif request.path == '/api/auth/logout/' and response.status_code == 200:
            user_info = 'anonymous'
            if hasattr(request, 'user') and request.user.is_authenticated:
                user_info = request.user.employee_id
            
            audit_logger.info(
                'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ',
                extra={
                    'user': user_info,
                    'action': 'LOGOUT',
                    'model': 'Auth',
                    'object_id': None,
                    'ip': get_client_ip(request),
                    'changes': '{}',
                }
            )
        
        return response
python
# settings.py ã® MIDDLEWARE ã«è¿½åŠ 
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'corsheaders.middleware.CorsMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',  # â† ã“ã®å¾Œã«
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
    'config.middleware.AuditMiddleware',  # â† è¿½åŠ 
]
ã“ã®æ™‚ç‚¹ã§: ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã ã‘è¨˜éŒ²ã•ã‚Œã‚‹

å‹•ä½œç¢ºèª:

bash
python manage.py runserver

# åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§
tail -f backend/logs/audit.log

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ­ã‚°ã‚¤ãƒ³
# â†’ ãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã¯ãšï¼
Step 5: ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢æ‹¡å¼µï¼ˆAPIæ“ä½œï¼‰ï¼ˆ30åˆ†ï¼‰
python
# middleware.py ã«è¿½åŠ 
class AuditMiddleware(MiddlewareMixin):
    
    def process_request(self, request):
        set_current_request(request)
        
        # ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ã‚’ä¿å­˜
        request._audit_data = {
            'method': request.method,
            'path': request.path,
        }
        
        return None
    
    def process_response(self, request, response):
        # ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆï¼ˆæ—¢å­˜ï¼‰
        # ...
        
        # APIæ“ä½œï¼ˆPOST/PUT/PATCH/DELETEï¼‰
        if request.method in ['POST', 'PUT', 'PATCH', 'DELETE']:
            # /api/users/ é…ä¸‹ã®ã¿è¨˜éŒ²ï¼ˆæ®µéšçš„ï¼‰
            if request.path.startswith('/api/users/'):
                action_map = {
                    'POST': 'CREATE',
                    'PUT': 'UPDATE',
                    'PATCH': 'UPDATE',
                    'DELETE': 'DELETE',
                }
                
                user_info = 'anonymous'
                if hasattr(request, 'user') and request.user.is_authenticated:
                    user_info = request.user.employee_id
                
                audit_logger.info(
                    f'{request.method} {request.path}',
                    extra={
                        'user': user_info,
                        'action': action_map[request.method],
                        'model': 'User',
                        'object_id': None,
                        'ip': get_client_ip(request),
                        'changes': json.dumps({'status_code': response.status_code}),
                    }
                )
        
        return response
ã“ã®æ™‚ç‚¹ã§: ãƒ­ã‚°ã‚¤ãƒ³ + APIæ“ä½œï¼ˆPOST/PUT/PATCH/DELETEï¼‰ãŒè¨˜éŒ²ã•ã‚Œã‚‹

Step 6: ã‚·ã‚°ãƒŠãƒ«è¿½åŠ ï¼ˆUserãƒ¢ãƒ‡ãƒ«ã®ã¿ï¼‰ï¼ˆ30åˆ†ï¼‰
python
# backend/common/signals.pyï¼ˆæ–°è¦ä½œæˆï¼‰
import logging
import json
from django.db.models.signals import post_save, post_delete, pre_save
from django.dispatch import receiver
from django.contrib.auth import get_user_model
from common.context import get_current_request, get_client_ip

User = get_user_model()
audit_logger = logging.getLogger('audit')

SENSITIVE_FIELDS = ['password']

@receiver(pre_save, sender=User)
def user_pre_save(sender, instance, **kwargs):
    """æ›´æ–°å‰ã®å€¤ã‚’ä¿å­˜"""
    if instance.pk:
        try:
            old = User.all_objects.get(pk=instance.pk)
            instance._old_values = {
                'username': old.username,
                'employee_id': old.employee_id,
                'is_admin': old.is_admin,
                'is_active': old.is_active,
            }
        except User.DoesNotExist:
            pass

@receiver(post_save, sender=User)
def user_post_save(sender, instance, created, **kwargs):
    """ä½œæˆãƒ»æ›´æ–°ã‚’è¨˜éŒ²"""
    action = 'CREATE' if created else 'UPDATE'
    
    # å¤‰æ›´å†…å®¹
    changes = {}
    if not created and hasattr(instance, '_old_values'):
        old = instance._old_values
        for field, old_value in old.items():
            new_value = getattr(instance, field)
            if old_value != new_value:
                if field in SENSITIVE_FIELDS:
                    changes[field] = {'old': '***', 'new': '***'}
                else:
                    changes[field] = {'old': old_value, 'new': new_value}
    
    # ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±
    request = get_current_request()
    user_info = 'system'
    ip = '127.0.0.1'
    
    if request and hasattr(request, 'user') and request.user.is_authenticated:
        user_info = request.user.employee_id
        ip = get_client_ip(request)
    
    audit_logger.info(
        f'User {action}: {instance.username}',
        extra={
            'user': user_info,
            'action': action,
            'model': 'User',
            'object_id': instance.id,
            'ip': ip,
            'changes': json.dumps(changes, ensure_ascii=False),
        }
    )

@receiver(post_delete, sender=User)
def user_post_delete(sender, instance, **kwargs):
    """å‰Šé™¤ã‚’è¨˜éŒ²"""
    request = get_current_request()
    user_info = 'system'
    ip = '127.0.0.1'
    
    if request and hasattr(request, 'user') and request.user.is_authenticated:
        user_info = request.user.employee_id
        ip = get_client_ip(request)
    
    audit_logger.info(
        f'User DELETE: {instance.username}',
        extra={
            'user': user_info,
            'action': 'DELETE',
            'model': 'User',
            'object_id': instance.id,
            'ip': ip,
            'changes': '{}',
        }
    )
python
# backend/users/apps.py
from django.apps import AppConfig

class UsersConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'users'
    
    def ready(self):
        import common.signals  # ã‚·ã‚°ãƒŠãƒ«ç™»éŒ²
```

**ã“ã®æ™‚ç‚¹ã§:** Userãƒ¢ãƒ‡ãƒ«ã®å…¨CRUDæ“ä½œãŒè¨˜éŒ²ã•ã‚Œã‚‹

---

## ğŸ¯ æ¨å¥¨ã™ã‚‹é€²ã‚æ–¹
```
1. Step 1-3ï¼ˆè¨­å®šã®ã¿ï¼‰
   â†“ æ—¢å­˜ç’°å¢ƒã«å½±éŸ¿ãªã—ã€å‹•ä½œç¢ºèª
   
2. Step 4ï¼ˆãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢æœ€å°ç‰ˆï¼‰
   â†“ ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã®ã¿è¨˜éŒ²
   â†“ å‹•ä½œç¢ºèªï¼ˆtail -f logs/audit.logï¼‰
   
3. Step 5ï¼ˆãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢æ‹¡å¼µï¼‰
   â†“ APIæ“ä½œã‚‚è¨˜éŒ²
   â†“ å‹•ä½œç¢ºèª
   
4. Step 6ï¼ˆã‚·ã‚°ãƒŠãƒ«ï¼‰
   â†“ ãƒ¢ãƒ‡ãƒ«æ“ä½œã‚‚è¨˜éŒ²
   â†“ æœ€çµ‚ç¢ºèª
   
5. ï¼ˆå¾Œæ—¥ï¼‰å…¨ãƒ¢ãƒ‡ãƒ«å¯¾å¿œ
   â†“ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèªã—ãªãŒã‚‰
âœ… å®‰å…¨æ€§ãƒã‚§ãƒƒã‚¯
é …ç›®	æ—¢å­˜ç’°å¢ƒã¸ã®å½±éŸ¿
settings.py ã®LOGGINGè¿½åŠ 	âœ… å½±éŸ¿ãªã—ï¼ˆdisable_existing_loggers=Falseï¼‰
MIDDLEWAREè¿½åŠ 	âœ… å½±éŸ¿ãªã—ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯å¤‰æ›´ã—ãªã„ï¼‰
ã‚·ã‚°ãƒŠãƒ«è¿½åŠ 	âœ… å½±éŸ¿ãªã—ï¼ˆä¿å­˜å‡¦ç†ã«å½±éŸ¿ã—ãªã„ï¼‰
logs/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª	âœ… å½±éŸ¿ãªã—
ğŸ’¡ æœ€çµ‚çš„ãªã‚¤ãƒ¡ãƒ¼ã‚¸
ã‚ãªãŸã®æœŸå¾…é€šã‚Šã€ã“ã‚“ãªæ„Ÿã˜ã®ãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã¾ã™:

json
{"timestamp": "2025-01-20 15:30:45", "level": "INFO", "user": "9999", "action": "LOGIN", "model": "Auth", "object_id": null, "ip": "192.168.1.100", "changes": "{}", "message": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸ"}
{"timestamp": "2025-01-20 15:31:10", "level": "INFO", "user": "9999", "action": "CREATE", "model": "User", "object_id": 5, "ip": "192.168.1.100", "changes": "{\"status_code\": 201}", "message": "POST /api/users/"}
{"timestamp": "2025-01-20 15:32:00", "level": "INFO", "user": "9999", "action": "UPDATE", "model": "User", "object_id": 5, "ip": "192.168.1.100", "changes": "{\"is_active\": {\"old\": true, \"new\": false}}", "message": "User UPDATE: å±±ç”°å¤ªéƒ"}
æ–¹å‘æ€§ã¯å®Œç’§ã§ã™ï¼ ã“ã®é †åºã§å®Ÿè£…ã™ã‚Œã°ã€æ—¢å­˜ç’°å¢ƒã‚’å£Šã•ãšã«ç›£æŸ»è¨¼è·¡ã‚’è¿½åŠ ã§ãã¾ã™ ( Ìãƒ»Ï‰ãƒ»`)b

